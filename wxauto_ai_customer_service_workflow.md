# wxautox å¾®ä¿¡è‡ªåŠ¨åŒ– AI å®¢æœå·¥ä½œæµè®¾è®¡

æœ¬æ–‡æ¡£åŸºäº `wxautox` å¾®ä¿¡è‡ªåŠ¨åŒ–åº“è®¾è®¡äº†ä¸€ä¸ªå®Œæ•´çš„ AI å®¢æœå·¥ä½œæµç³»ç»Ÿï¼Œéµå¾ª Prompt Engineering Guide çš„æœ€ä½³å®è·µï¼Œä½¿ç”¨ä¸åŒçš„æç¤ºè¯èŠ‚ç‚¹æ¥å®ç°é«˜æ•ˆçš„å®¢æˆ·æœåŠ¡ã€‚

## ç›®å½•

- [1. å·¥ä½œæµæ¦‚è¿°](#1-å·¥ä½œæµæ¦‚è¿°)
- [2. ç³»ç»Ÿæ¶æ„](#2-ç³»ç»Ÿæ¶æ„)
- [3. æ ¸å¿ƒèŠ‚ç‚¹è®¾è®¡](#3-æ ¸å¿ƒèŠ‚ç‚¹è®¾è®¡)
- [4. æç¤ºè¯è®¾è®¡](#4-æç¤ºè¯è®¾è®¡)
- [5. å®ç°ç¤ºä¾‹](#5-å®ç°ç¤ºä¾‹)
- [6. æœ€ä½³å®è·µ](#6-æœ€ä½³å®è·µ)

## 1. å·¥ä½œæµæ¦‚è¿°

### 1.1 ä¸šåŠ¡åœºæ™¯
- ä¼ä¸šå¾®ä¿¡å®¢æœè‡ªåŠ¨åŒ–
- å¤šèŠå¤©çª—å£åŒæ—¶ç›‘å¬å’Œå¤„ç†
- æ™ºèƒ½æ„å›¾è¯†åˆ«å’Œåˆ†ç±»
- è‡ªåŠ¨å›å¤ç”Ÿæˆå’Œå®¡æ ¸
- äººå·¥å®¢æœæ¥ç®¡æœºåˆ¶

### 1.2 æŠ€æœ¯ç‰¹ç‚¹
- åŸºäº `wxautox` åº“çš„å¾®ä¿¡çª—å£æ“ä½œ
- é‡‡ç”¨å¤šèŠ‚ç‚¹ä¸²è”çš„ AI å·¥ä½œæµ
- æ¯ä¸ªèŠ‚ç‚¹ä¸“é—¨é’ˆå¯¹ç‰¹å®šä»»åŠ¡ä¼˜åŒ–
- æ”¯æŒå¹¶å‘å¤„ç†å¤šä¸ªä¼šè¯

## 2. ç³»ç»Ÿæ¶æ„

```
å¾®ä¿¡æ¶ˆæ¯ â†’ æ¶ˆæ¯é¢„å¤„ç† â†’ æ„å›¾è¯†åˆ« â†’ é—®é¢˜åˆ†ç±» â†’ çŸ¥è¯†æ£€ç´¢ â†’ å›å¤ç”Ÿæˆ â†’ è´¨é‡å®¡æ ¸ â†’ å‘é€æˆ–è½¬äººå·¥
    â†“           â†“           â†“         â†“         â†“         â†“         â†“         â†“
  è¿‡æ»¤å™¨     æ ‡å‡†åŒ–å¤„ç†   Intent    Category  Knowledge  Response   Quality   Delivery
  èŠ‚ç‚¹       èŠ‚ç‚¹        Node      Node      Retrieval   Generator  Control   Node
                                              Node       Node      Node
```

## 3. æ ¸å¿ƒèŠ‚ç‚¹è®¾è®¡

### 3.1 æ¶ˆæ¯é¢„å¤„ç†èŠ‚ç‚¹ (Message Preprocessor)
**åŠŸèƒ½**: æ¸…æ´—å’Œæ ‡å‡†åŒ–è¾“å…¥æ¶ˆæ¯
- è¿‡æ»¤æ— æ•ˆæ¶ˆæ¯ï¼ˆç³»ç»Ÿæ¶ˆæ¯ã€è¡¨æƒ…ç­‰ï¼‰
- æ–‡æœ¬æ¸…æ´—å’Œæ ¼å¼åŒ–
- æ•æ„Ÿä¿¡æ¯è„±æ•

### 3.2 æ„å›¾è¯†åˆ«èŠ‚ç‚¹ (Intent Recognition)  
**åŠŸèƒ½**: è¯†åˆ«ç”¨æˆ·çš„æ ¸å¿ƒæ„å›¾
- å’¨è¯¢ç±» (Inquiry)
- æŠ•è¯‰ç±» (Complaint) 
- è´­ä¹°ç±» (Purchase)
- æŠ€æœ¯æ”¯æŒç±» (Technical Support)
- é—²èŠç±» (Chitchat)

### 3.3 é—®é¢˜åˆ†ç±»èŠ‚ç‚¹ (Problem Classification)
**åŠŸèƒ½**: å¯¹å…·ä½“é—®é¢˜è¿›è¡Œç»†åˆ†
- äº§å“ç›¸å…³
- æœåŠ¡ç›¸å…³  
- è´¦æˆ·ç›¸å…³
- æŠ€æœ¯é—®é¢˜
- å…¶ä»–

### 3.4 çŸ¥è¯†æ£€ç´¢èŠ‚ç‚¹ (Knowledge Retrieval)
**åŠŸèƒ½**: æ£€ç´¢ç›¸å…³çŸ¥è¯†åº“å†…å®¹
- åŸºäºé—®é¢˜åˆ†ç±»åŒ¹é…çŸ¥è¯†åº“
- è¿”å›ç›¸å…³åº¦æœ€é«˜çš„ç­”æ¡ˆ
- æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯

### 3.5 å›å¤ç”ŸæˆèŠ‚ç‚¹ (Response Generator)
**åŠŸèƒ½**: ç”Ÿæˆä¸ªæ€§åŒ–å›å¤
- åŸºäºæ£€ç´¢åˆ°çš„çŸ¥è¯†ç”Ÿæˆå›å¤
- ä¿æŒå‹å¥½ä¸“ä¸šçš„è¯­è°ƒ
- é€‚åº”ä¸åŒç”¨æˆ·ç±»å‹

### 3.6 è´¨é‡å®¡æ ¸èŠ‚ç‚¹ (Quality Control)
**åŠŸèƒ½**: å®¡æ ¸ç”Ÿæˆçš„å›å¤è´¨é‡
- æ£€æŸ¥å›å¤çš„å‡†ç¡®æ€§
- è¯„ä¼°è¯­è¨€çš„é€‚å½“æ€§
- å†³å®šæ˜¯å¦éœ€è¦äººå·¥ä»‹å…¥

### 3.7 å‘é€æ§åˆ¶èŠ‚ç‚¹ (Delivery Controller)
**åŠŸèƒ½**: æ§åˆ¶æ¶ˆæ¯å‘é€æˆ–è½¬äººå·¥
- è‡ªåŠ¨å‘é€ç¬¦åˆæ ‡å‡†çš„å›å¤
- å°†å¤æ‚é—®é¢˜è½¬ç»™äººå·¥å®¢æœ
- è®°å½•å’Œåé¦ˆå¤„ç†ç»“æœ

## 4. æç¤ºè¯è®¾è®¡

### 4.1 æ¶ˆæ¯é¢„å¤„ç†æç¤ºè¯

```
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å®¢æœæ¶ˆæ¯é¢„å¤„ç†AIåŠ©æ‰‹ã€‚ä½ çš„ä»»åŠ¡æ˜¯å¯¹ç”¨æˆ·å‘é€çš„å¾®ä¿¡æ¶ˆæ¯è¿›è¡Œé¢„å¤„ç†ã€‚

### æŒ‡ä»¤ ###
å¯¹ä»¥ä¸‹æ¶ˆæ¯è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ï¼š
1. åˆ¤æ–­æ¶ˆæ¯æ˜¯å¦éœ€è¦å®¢æœå¤„ç†ï¼ˆæ’é™¤çº¯è¡¨æƒ…ã€ç³»ç»Ÿæ¶ˆæ¯ã€æ˜æ˜¾çš„è¯¯å‘ç­‰ï¼‰
2. æå–å’Œæ¸…æ´—æ–‡æœ¬å†…å®¹
3. å°†è¯­éŸ³è½¬ä¸ºæ–‡å­—ï¼ˆå¦‚æœé€‚ç”¨ï¼‰
4. ç§»é™¤æ•æ„Ÿä¿¡æ¯

### è¾“å…¥æ ¼å¼ ###
æ¶ˆæ¯ç±»å‹ï¼š{message_type}
æ¶ˆæ¯å†…å®¹ï¼š{message_content}
å‘é€è€…ï¼š{sender}
æ—¶é—´ï¼š{timestamp}

### è¾“å‡ºæ ¼å¼ ###
```json
{
  "need_processing": boolean,
  "cleaned_content": "æ¸…æ´—åçš„æ–‡æœ¬å†…å®¹",
  "message_type": "æ–‡æœ¬/å›¾ç‰‡/è¯­éŸ³/æ–‡ä»¶ç­‰",
  "priority": "ä½/ä¸­/é«˜",
  "reason": "å¤„ç†åŸå› è¯´æ˜"
}
```

### è§„åˆ™ ###
- å¦‚æœæ¶ˆæ¯åŒ…å«ç´§æ€¥è¯æ±‡ï¼ˆå¦‚"ç´§æ€¥"ã€"æŠ•è¯‰"ã€"é€€æ¬¾"ç­‰ï¼‰ï¼Œä¼˜å…ˆçº§è®¾ä¸º"é«˜"
- å¦‚æœæ¶ˆæ¯è¿‡äºç®€çŸ­ï¼ˆå°‘äº3ä¸ªå­—ç¬¦ï¼‰ä¸”ä¸åŒ…å«å®è´¨å†…å®¹ï¼Œæ ‡è®°ä¸ºä¸éœ€è¦å¤„ç†
- ä¿æŒåŸå§‹è¯­ä¹‰ï¼Œåªåšå¿…è¦çš„æ ¼å¼åŒ–å’Œæ¸…æ´—

ç°åœ¨è¯·å¤„ç†ä»¥ä¸‹æ¶ˆæ¯ï¼š
```

### 4.2 æ„å›¾è¯†åˆ«æç¤ºè¯

```
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å®¢æœæ„å›¾è¯†åˆ«ä¸“å®¶ã€‚ä½ éœ€è¦å‡†ç¡®è¯†åˆ«ç”¨æˆ·çš„çœŸå®æ„å›¾ã€‚

### æŒ‡ä»¤ ###
åˆ†æç”¨æˆ·æ¶ˆæ¯ï¼Œè¯†åˆ«å…¶ä¸»è¦æ„å›¾ã€‚è¯·ä½¿ç”¨ä»¥ä¸‹å‡ æ­¥è¿›è¡Œæ€è€ƒï¼š

1. é¦–å…ˆåˆ†ææ¶ˆæ¯çš„æ ¸å¿ƒå…³é”®è¯
2. ç†è§£ç”¨æˆ·çš„æƒ…æ„Ÿè‰²å½©ï¼ˆç§¯æ/æ¶ˆæ/ä¸­æ€§ï¼‰
3. åˆ¤æ–­ç”¨æˆ·æœŸæœ›å¾—åˆ°ä»€ä¹ˆç±»å‹çš„å¸®åŠ©
4. æœ€ç»ˆç¡®å®šæ„å›¾åˆ†ç±»

### æ„å›¾ç±»åˆ« ###
- consultationï¼šå’¨è¯¢äº§å“æˆ–æœåŠ¡ä¿¡æ¯
- complaintï¼šæŠ•è¯‰æˆ–è¡¨è¾¾ä¸æ»¡
- purchaseï¼šè´­ä¹°ç›¸å…³éœ€æ±‚
- technical_supportï¼šæŠ€æœ¯é—®é¢˜æ±‚åŠ©  
- accountï¼šè´¦æˆ·ç›¸å…³é—®é¢˜
- chitchatï¼šé—²èŠæˆ–é—®å€™
- urgentï¼šç´§æ€¥æƒ…å†µéœ€è¦ç«‹å³å¤„ç†

### è¾“å…¥ ###
ç”¨æˆ·æ¶ˆæ¯ï¼š{user_message}
ç”¨æˆ·å†å²ï¼š{user_history}ï¼ˆæœ€è¿‘3æ¡æ¶ˆæ¯ï¼‰

### è¾“å‡ºæ ¼å¼ ###
```json
{
  "intent": "æ„å›¾ç±»åˆ«",
  "confidence": 0.85,
  "reasoning": "åˆ¤æ–­ä¾æ®çš„ç®€è¦è¯´æ˜",
  "keywords": ["å…³é”®è¯1", "å…³é”®è¯2"],
  "emotion": "positive/negative/neutral",
  "urgency": "low/medium/high"
}
```

### ç¤ºä¾‹ ###
ç”¨æˆ·æ¶ˆæ¯ï¼š"ä½ ä»¬çš„äº§å“æ€ä¹ˆè¿™ä¹ˆè´µï¼Ÿæˆ‘æœ‹å‹è¯´åˆ«å®¶æ›´ä¾¿å®œ"
åˆ†ææ€è·¯ï¼š
1. å…³é”®è¯ï¼šäº§å“ã€è´µã€ä¾¿å®œ
2. æƒ…æ„Ÿï¼šè½»å¾®æ¶ˆæ
3. æœŸæœ›ï¼šæƒ³äº†è§£ä»·æ ¼åˆç†æ€§æˆ–å¯»æ±‚ä¼˜æƒ 
4. æ„å›¾ï¼šconsultationï¼ˆå’¨è¯¢ï¼‰

ç°åœ¨è¯·åˆ†æä»¥ä¸‹ç”¨æˆ·æ¶ˆæ¯ï¼š
```

### 4.3 é—®é¢˜åˆ†ç±»æç¤ºè¯

```
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å®¢æœé—®é¢˜åˆ†ç±»AIã€‚åŸºäºå·²è¯†åˆ«çš„ç”¨æˆ·æ„å›¾ï¼Œä½ éœ€è¦å°†é—®é¢˜è¿›ä¸€æ­¥ç»†åˆ†åˆ°å…·ä½“ç±»åˆ«ã€‚

### æŒ‡ä»¤ ###
æ ¹æ®ç”¨æˆ·çš„æ„å›¾å’Œæ¶ˆæ¯å†…å®¹ï¼Œå°†é—®é¢˜åˆ†ç±»åˆ°æœ€åˆé€‚çš„å­ç±»åˆ«ä¸­ã€‚

### åˆ†ç±»ä½“ç³» ###

**äº§å“ç›¸å…³ (product)**
- product_featuresï¼šäº§å“åŠŸèƒ½ç‰¹æ€§
- product_pricingï¼šä»·æ ¼æ”¿ç­–  
- product_comparisonï¼šäº§å“å¯¹æ¯”
- product_availabilityï¼šåº“å­˜ä¾›åº”

**æœåŠ¡ç›¸å…³ (service)**
- deliveryï¼šé…é€æœåŠ¡
- after_salesï¼šå”®åæœåŠ¡
- warrantyï¼šä¿ä¿®æ”¿ç­–
- return_refundï¼šé€€æ¢è´§

**è´¦æˆ·ç›¸å…³ (account)**
- login_issuesï¼šç™»å½•é—®é¢˜
- paymentï¼šæ”¯ä»˜é—®é¢˜
- order_statusï¼šè®¢å•çŠ¶æ€
- profileï¼šä¸ªäººèµ„æ–™

**æŠ€æœ¯æ”¯æŒ (technical)**
- usage_helpï¼šä½¿ç”¨å¸®åŠ©
- troubleshootingï¼šæ•…éšœæ’é™¤
- compatibilityï¼šå…¼å®¹æ€§é—®é¢˜
- updateï¼šæ›´æ–°å‡çº§

**å…¶ä»– (other)**
- general_inquiryï¼šä¸€èˆ¬å’¨è¯¢
- feedbackï¼šæ„è§åé¦ˆ
- partnershipï¼šåˆä½œå’¨è¯¢

### è¾“å…¥ ###
ç”¨æˆ·æ„å›¾ï¼š{intent}
ç”¨æˆ·æ¶ˆæ¯ï¼š{user_message}
è¯†åˆ«å‡ºçš„å…³é”®è¯ï¼š{keywords}

### è¾“å‡ºæ ¼å¼ ###
```json
{
  "category": "ä¸»åˆ†ç±»",
  "subcategory": "å­åˆ†ç±»",
  "confidence": 0.90,
  "related_topics": ["ç›¸å…³ä¸»é¢˜1", "ç›¸å…³ä¸»é¢˜2"],
  "suggested_knowledge": ["å»ºè®®æŸ¥è¯¢çš„çŸ¥è¯†ç‚¹1", "çŸ¥è¯†ç‚¹2"]
}
```

è®©æˆ‘ä»¬å¼€å§‹åˆ†ç±»ï¼š
```

### 4.4 çŸ¥è¯†æ£€ç´¢æç¤ºè¯

```
ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½çŸ¥è¯†æ£€ç´¢ä¸“å®¶ã€‚åŸºäºé—®é¢˜åˆ†ç±»ï¼Œä½ éœ€è¦ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢æœ€ç›¸å…³çš„ä¿¡æ¯ã€‚

### æŒ‡ä»¤ ###
æ ¹æ®é—®é¢˜åˆ†ç±»å’Œç”¨æˆ·æŸ¥è¯¢ï¼Œæ£€ç´¢å¹¶æ•´ç†æœ€ç›¸å…³çš„çŸ¥è¯†å†…å®¹ã€‚

### æ£€ç´¢åŸåˆ™ ###
1. ä¼˜å…ˆåŒ¹é…ç²¾ç¡®çš„é—®é¢˜ç±»åˆ«
2. æŸ¥æ‰¾æœ€æ–°å’Œå‡†ç¡®çš„ä¿¡æ¯
3. æä¾›è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯
4. å¦‚æœæ²¡æœ‰å®Œå…¨åŒ¹é…çš„å†…å®¹ï¼Œæä¾›æœ€ç›¸å…³çš„æ›¿ä»£ä¿¡æ¯

### è¾“å…¥ ###
é—®é¢˜åˆ†ç±»ï¼š{category} - {subcategory}
ç”¨æˆ·åŸå§‹é—®é¢˜ï¼š{user_question}
ç›¸å…³å…³é”®è¯ï¼š{keywords}
çŸ¥è¯†åº“å†…å®¹ï¼š{knowledge_base}

### å¤„ç†æ­¥éª¤ ###
1. åœ¨çŸ¥è¯†åº“ä¸­æœç´¢ç›¸å…³æ¡ç›®
2. è¯„ä¼°æ¯ä¸ªæ¡ç›®çš„ç›¸å…³æ€§
3. æ•´ç†å’Œç»„ç»‡æœ€æœ‰ç”¨çš„ä¿¡æ¯
4. å¦‚æœä¿¡æ¯ä¸è¶³ï¼Œæ ‡è®°éœ€è¦äººå·¥ååŠ©çš„ç‚¹

### è¾“å‡ºæ ¼å¼ ###
```json
{
  "found_answers": [
    {
      "content": "ç­”æ¡ˆå†…å®¹",
      "relevance_score": 0.95,
      "source": "çŸ¥è¯†åº“æ¥æº",
      "last_updated": "2024-01-01"
    }
  ],
  "confidence": 0.85,
  "completeness": "complete/partial/insufficient",
  "additional_context": "è¡¥å……è¯´æ˜",
  "recommend_human": boolean,
  "follow_up_questions": ["å¯èƒ½çš„åç»­é—®é¢˜1", "é—®é¢˜2"]
}
```

ç°åœ¨è¯·æ£€ç´¢ç›¸å…³çŸ¥è¯†ï¼š
```

### 4.5 å›å¤ç”Ÿæˆæç¤ºè¯

```
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šå‹å¥½çš„å®¢æœä»£è¡¨ã€‚åŸºäºæ£€ç´¢åˆ°çš„çŸ¥è¯†ä¿¡æ¯ï¼Œç”Ÿæˆä¸ªæ€§åŒ–çš„å®¢æˆ·å›å¤ã€‚

### è§’è‰²è®¾å®š ###
- å‹å¥½ã€è€å¿ƒã€ä¸“ä¸šçš„å®¢æœäººå‘˜
- å–„äºç”¨ç®€å•æ˜“æ‡‚çš„è¯­è¨€è§£é‡Šå¤æ‚é—®é¢˜
- æ€»æ˜¯ä»¥å®¢æˆ·éœ€æ±‚ä¸ºä¸­å¿ƒ
- ä¿æŒç¤¼è²Œå’Œç§¯æçš„è¯­è°ƒ

### æŒ‡ä»¤ ###
åŸºäºæ£€ç´¢åˆ°çš„çŸ¥è¯†ä¿¡æ¯å’Œç”¨æˆ·çš„å…·ä½“æƒ…å†µï¼Œç”Ÿæˆæ°å½“çš„å›å¤ã€‚

### å›å¤åŸåˆ™ ###
1. ç›´æ¥å›ç­”ç”¨æˆ·é—®é¢˜ï¼Œé¿å…ç»•å¼¯å­
2. ä½¿ç”¨å‹å¥½ã€ç¤¼è²Œçš„è¯­è°ƒ
3. æä¾›å…·ä½“å¯è¡Œçš„è§£å†³æ–¹æ¡ˆ
4. å¦‚æœé—®é¢˜å¤æ‚ï¼Œåˆ†æ­¥éª¤è¯´æ˜
5. ä¸»åŠ¨æä¾›ç›¸å…³çš„é¢å¤–å¸®åŠ©
6. ç•™ä¸‹åç»­æ²Ÿé€šçš„å¼€æ”¾æ€§

### è¾“å…¥ä¿¡æ¯ ###
ç”¨æˆ·åŸå§‹é—®é¢˜ï¼š{user_question}
ç”¨æˆ·æ„å›¾ï¼š{user_intent}
æƒ…æ„ŸçŠ¶æ€ï¼š{emotion}
æ£€ç´¢åˆ°çš„çŸ¥è¯†ï¼š{retrieved_knowledge}
ç”¨æˆ·å†å²ï¼š{conversation_history}

### å›å¤æ¨¡æ¿ ###
**å¼€åœº**ï¼šç¤¼è²Œé—®å€™å’Œç¡®è®¤é—®é¢˜
**ä¸»ä½“**ï¼šç›´æ¥å›ç­”å’Œè§£å†³æ–¹æ¡ˆ
**è¡¥å……**ï¼šç›¸å…³å»ºè®®æˆ–é¢å¤–ä¿¡æ¯
**ç»“å°¾**ï¼šè¯¢é—®æ˜¯å¦è¿˜æœ‰å…¶ä»–éœ€è¦å¸®åŠ©çš„

### è¯­è¨€è¦æ±‚ ###
- ä½¿ç”¨ç®€æ´æ˜äº†çš„ä¸­æ–‡
- é¿å…è¿‡äºä¸“ä¸šçš„æŠ€æœ¯æœ¯è¯­
- é€‚å½“ä½¿ç”¨è¡¨æƒ…ç¬¦å·å¢åŠ äº²å’ŒåŠ›
- ä¿æŒ1-3æ®µçš„åˆé€‚é•¿åº¦

### è¾“å‡ºæ ¼å¼ ###
```json
{
  "response": "ç”Ÿæˆçš„å›å¤å†…å®¹",
  "tone": "friendly/professional/empathetic",
  "confidence": 0.88,
  "contains_solution": boolean,
  "requires_followup": boolean,
  "estimated_satisfaction": "high/medium/low",
  "alternative_responses": ["å¤‡é€‰å›å¤1", "å¤‡é€‰å›å¤2"]
}
```

ç°åœ¨è¯·ç”Ÿæˆå®¢æœå›å¤ï¼š
```

### 4.6 è´¨é‡å®¡æ ¸æç¤ºè¯

```
ä½ æ˜¯ä¸€ä¸ªä¸¥æ ¼çš„å®¢æœè´¨é‡å®¡æ ¸ä¸“å®¶ã€‚ä½ çš„ä»»åŠ¡æ˜¯è¯„ä¼°AIç”Ÿæˆçš„å®¢æœå›å¤è´¨é‡ã€‚

### æŒ‡ä»¤ ###
ä»å¤šä¸ªç»´åº¦å…¨é¢è¯„ä¼°å›å¤è´¨é‡ï¼Œç¡®ä¿å®¢æˆ·èƒ½è·å¾—æ»¡æ„çš„æœåŠ¡ä½“éªŒã€‚

### è¯„ä¼°ç»´åº¦ ###

**å‡†ç¡®æ€§ (Accuracy)**
- å›å¤å†…å®¹æ˜¯å¦å‡†ç¡®æ— è¯¯
- æ˜¯å¦ä¸çŸ¥è¯†åº“ä¿¡æ¯ä¸€è‡´
- æ²¡æœ‰äº‹å®æ€§é”™è¯¯

**ç›¸å…³æ€§ (Relevance)**  
- æ˜¯å¦ç›´æ¥å›ç­”äº†ç”¨æˆ·é—®é¢˜
- æ˜¯å¦ç†è§£äº†ç”¨æˆ·çœŸå®éœ€æ±‚
- æ²¡æœ‰ç­”éæ‰€é—®

**å®Œæ•´æ€§ (Completeness)**
- æ˜¯å¦æä¾›äº†å®Œæ•´çš„è§£å†³æ–¹æ¡ˆ
- æ˜¯å¦é—æ¼äº†é‡è¦ä¿¡æ¯
- æ˜¯å¦éœ€è¦è¡¥å……è¯´æ˜

**è¯­è¨€è´¨é‡ (Language Quality)**
- è¯­æ³•æ­£ç¡®ï¼Œè¡¨è¾¾æ¸…æ™°
- è¯­è°ƒå‹å¥½ä¸“ä¸š
- æ ¼å¼è§„èŒƒ

**ç”¨æˆ·ä½“éªŒ (User Experience)**
- æ˜¯å¦è®©ç”¨æˆ·æ„Ÿåˆ°è¢«é‡è§†
- æ˜¯å¦æä¾›äº†æœ‰ä»·å€¼çš„å¸®åŠ©
- æ˜¯å¦æ¿€å‘äº†ç”¨æˆ·ä¿¡ä»»

### è¾“å…¥ ###
ç”¨æˆ·åŸå§‹é—®é¢˜ï¼š{user_question}
AIç”Ÿæˆå›å¤ï¼š{generated_response}
ç”¨æˆ·æƒ…æ„ŸçŠ¶æ€ï¼š{user_emotion}
é—®é¢˜å¤æ‚åº¦ï¼š{complexity_level}

### è¯„ä¼°æ ‡å‡† ###
æ¯ä¸ªç»´åº¦è¯„åˆ†ï¼š1-5åˆ†
- 5åˆ†ï¼šä¼˜ç§€
- 4åˆ†ï¼šè‰¯å¥½  
- 3åˆ†ï¼šåˆæ ¼
- 2åˆ†ï¼šéœ€è¦æ”¹è¿›
- 1åˆ†ï¼šä¸åˆæ ¼

### è¾“å‡ºæ ¼å¼ ###
```json
{
  "overall_score": 4.2,
  "dimension_scores": {
    "accuracy": 4.0,
    "relevance": 4.5, 
    "completeness": 4.0,
    "language_quality": 4.5,
    "user_experience": 4.0
  },
  "pass_threshold": 3.5,
  "recommendation": "approve/improve/reject",
  "issues_found": ["å‘ç°çš„é—®é¢˜1", "é—®é¢˜2"],
  "improvement_suggestions": ["æ”¹è¿›å»ºè®®1", "å»ºè®®2"],
  "estimated_user_satisfaction": "high/medium/low",
  "requires_human_review": boolean
}
```

ç°åœ¨è¯·è¿›è¡Œè´¨é‡å®¡æ ¸ï¼š
```

### 4.7 å‘é€æ§åˆ¶æç¤ºè¯

```
ä½ æ˜¯å®¢æœç³»ç»Ÿçš„æœ€ç»ˆå‘é€æ§åˆ¶å™¨ã€‚åŸºäºè´¨é‡å®¡æ ¸ç»“æœï¼Œä½ éœ€è¦å†³å®šæœ€ä½³çš„å¤„ç†æ–¹å¼ã€‚

### æŒ‡ä»¤ ###
æ ¹æ®å›å¤è´¨é‡ã€ç”¨æˆ·æƒ…å†µå’Œä¸šåŠ¡è§„åˆ™ï¼Œå†³å®šæ˜¯å¦è‡ªåŠ¨å‘é€å›å¤æˆ–è½¬äººå·¥å¤„ç†ã€‚

### å†³ç­–ä¾æ® ###

**è‡ªåŠ¨å‘é€æ¡ä»¶**
- è´¨é‡è¯„åˆ† >= 3.5
- é—®é¢˜ç±»å‹ä¸ºå¸¸è§æ ‡å‡†é—®é¢˜
- ç”¨æˆ·æƒ…ç»ªç¨³å®š
- å›å¤åŒ…å«å®Œæ•´è§£å†³æ–¹æ¡ˆ

**è½¬äººå·¥æ¡ä»¶**
- è´¨é‡è¯„åˆ† < 3.5
- æ¶‰åŠæ•æ„Ÿé—®é¢˜ï¼ˆæŠ•è¯‰ã€é€€æ¬¾ç­‰ï¼‰
- ç”¨æˆ·æƒ…ç»ªæ¿€åŠ¨æˆ–ä¸æ»¡
- é—®é¢˜è¶…å‡ºçŸ¥è¯†åº“èŒƒå›´
- éœ€è¦ä¸ªæ€§åŒ–å¤„ç†

**å»¶è¿Ÿå¤„ç†æ¡ä»¶**
- éœ€è¦éªŒè¯ä¿¡æ¯å‡†ç¡®æ€§
- éœ€è¦æŸ¥è¯¢å®æ—¶æ•°æ®
- æ¶‰åŠè´¦æˆ·æ•æ„Ÿæ“ä½œ

### è¾“å…¥ ###
è´¨é‡å®¡æ ¸ç»“æœï¼š{quality_result}
ç”¨æˆ·æƒ…æ„ŸçŠ¶æ€ï¼š{user_emotion}
é—®é¢˜ç±»å‹ï¼š{problem_type}
ä¸šåŠ¡ä¼˜å…ˆçº§ï¼š{priority}
å½“å‰äººå·¥å®¢æœçŠ¶æ€ï¼š{human_agent_status}

### è¾“å‡ºæ ¼å¼ ###
```json
{
  "action": "send/transfer/delay",
  "explanation": "å†³ç­–è¯´æ˜",
  "send_immediately": boolean,
  "assign_to_human": boolean,
  "human_agent_note": "ç»™äººå·¥å®¢æœçš„å¤‡æ³¨",
  "follow_up_required": boolean,
  "estimated_resolution_time": "é¢„è®¡å¤„ç†æ—¶é—´",
  "priority_level": "low/medium/high/urgent"
}
```

å¦‚æœactionä¸º"send"ï¼Œè¿˜åŒ…æ‹¬ï¼š
```json
{
  "final_message": "æœ€ç»ˆå‘é€çš„æ¶ˆæ¯å†…å®¹",
  "typing_delay": 2,
  "send_method": "normal/typing_effect"
}
```

ç°åœ¨è¯·åšå‡ºå‘é€å†³ç­–ï¼š
```

## 5. å®ç°ç¤ºä¾‹

### 5.1 å®Œæ•´å·¥ä½œæµå®ç°

```python
import json
from wxautox import WeChat
from typing import Dict, List, Any
import time

class AICustomerServiceWorkflow:
    def __init__(self):
        self.wx = WeChat()
        self.knowledge_base = self.load_knowledge_base()
        
    def process_message(self, msg, chat):
        """å¤„ç†å•æ¡æ¶ˆæ¯çš„å®Œæ•´å·¥ä½œæµ"""
        try:
            # æ­¥éª¤1: æ¶ˆæ¯é¢„å¤„ç†
            preprocessed = self.preprocess_message(msg)
            if not preprocessed['need_processing']:
                return
            
            # æ­¥éª¤2: æ„å›¾è¯†åˆ«  
            intent_result = self.recognize_intent(preprocessed['cleaned_content'])
            
            # æ­¥éª¤3: é—®é¢˜åˆ†ç±»
            classification = self.classify_problem(
                intent_result['intent'], 
                preprocessed['cleaned_content'],
                intent_result['keywords']
            )
            
            # æ­¥éª¤4: çŸ¥è¯†æ£€ç´¢
            knowledge = self.retrieve_knowledge(
                classification['category'],
                classification['subcategory'], 
                preprocessed['cleaned_content']
            )
            
            # æ­¥éª¤5: å›å¤ç”Ÿæˆ
            response = self.generate_response(
                preprocessed['cleaned_content'],
                intent_result,
                knowledge
            )
            
            # æ­¥éª¤6: è´¨é‡å®¡æ ¸
            quality = self.quality_control(
                preprocessed['cleaned_content'],
                response['response'],
                intent_result['emotion']
            )
            
            # æ­¥éª¤7: å‘é€æ§åˆ¶
            delivery = self.delivery_control(
                quality,
                intent_result,
                classification
            )
            
            # æ‰§è¡Œæœ€ç»ˆåŠ¨ä½œ
            self.execute_action(delivery, chat, msg.sender)
            
        except Exception as e:
            print(f"å¤„ç†æ¶ˆæ¯æ—¶å‡ºé”™: {e}")
            # å¼‚å¸¸æƒ…å†µä¸‹è½¬äººå·¥å¤„ç†
            self.transfer_to_human(chat, msg.sender, str(e))
    
    def preprocess_message(self, msg) -> Dict:
        """æ¶ˆæ¯é¢„å¤„ç†"""
        # ä½¿ç”¨é¢„å¤„ç†æç¤ºè¯è°ƒç”¨LLM
        prompt = self.build_preprocessing_prompt(msg)
        result = self.call_llm(prompt)
        return json.loads(result)
    
    def recognize_intent(self, message: str) -> Dict:
        """æ„å›¾è¯†åˆ«"""
        prompt = self.build_intent_prompt(message)
        result = self.call_llm(prompt)
        return json.loads(result)
    
    def classify_problem(self, intent: str, message: str, keywords: List[str]) -> Dict:
        """é—®é¢˜åˆ†ç±»"""
        prompt = self.build_classification_prompt(intent, message, keywords)
        result = self.call_llm(prompt)
        return json.loads(result)
    
    def retrieve_knowledge(self, category: str, subcategory: str, question: str) -> Dict:
        """çŸ¥è¯†æ£€ç´¢"""
        prompt = self.build_retrieval_prompt(category, subcategory, question)
        result = self.call_llm(prompt)
        return json.loads(result)
    
    def generate_response(self, question: str, intent: Dict, knowledge: Dict) -> Dict:
        """å›å¤ç”Ÿæˆ"""
        prompt = self.build_response_prompt(question, intent, knowledge)
        result = self.call_llm(prompt)
        return json.loads(result)
    
    def quality_control(self, question: str, response: str, emotion: str) -> Dict:
        """è´¨é‡å®¡æ ¸"""
        prompt = self.build_quality_prompt(question, response, emotion)
        result = self.call_llm(prompt)
        return json.loads(result)
    
    def delivery_control(self, quality: Dict, intent: Dict, classification: Dict) -> Dict:
        """å‘é€æ§åˆ¶"""
        prompt = self.build_delivery_prompt(quality, intent, classification)
        result = self.call_llm(prompt)
        return json.loads(result)
    
    def execute_action(self, delivery: Dict, chat, sender: str):
        """æ‰§è¡Œæœ€ç»ˆåŠ¨ä½œ"""
        if delivery['action'] == 'send':
            # æ¨¡æ‹Ÿæ‰“å­—æ•ˆæœ
            if delivery.get('send_method') == 'typing_effect':
                chat.SendTypingText(delivery['final_message'])
            else:
                chat.SendMsg(delivery['final_message'])
                
        elif delivery['action'] == 'transfer':
            self.transfer_to_human(chat, sender, delivery['human_agent_note'])
            
        elif delivery['action'] == 'delay':
            # æ·»åŠ åˆ°å»¶è¿Ÿå¤„ç†é˜Ÿåˆ—
            self.add_to_delay_queue(chat, sender, delivery)
    
    def transfer_to_human(self, chat, sender: str, note: str):
        """è½¬äººå·¥å¤„ç†"""
        transfer_message = f"æ‚¨å¥½ï¼Œæˆ‘æ­£åœ¨ä¸ºæ‚¨è½¬æ¥äººå·¥å®¢æœï¼Œè¯·ç¨ç­‰ç‰‡åˆ»ã€‚\n\nå¤‡æ³¨ä¿¡æ¯ï¼š{note}"
        chat.SendMsg(transfer_message)
        # è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„è½¬æ¥é€»è¾‘
    
    def start_monitoring(self, chat_list: List[str]):
        """å¼€å§‹ç›‘å¬å¤šä¸ªèŠå¤©çª—å£"""
        for chat_name in chat_list:
            self.wx.AddListenChat(
                nickname=chat_name,
                callback=self.process_message
            )
        
        self.wx.StartListening()
        print("AIå®¢æœç³»ç»Ÿå·²å¯åŠ¨ï¼Œæ­£åœ¨ç›‘å¬æ¶ˆæ¯...")
        self.wx.KeepRunning()

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    # åˆå§‹åŒ–AIå®¢æœç³»ç»Ÿ
    ai_service = AICustomerServiceWorkflow()
    
    # è®¾ç½®è¦ç›‘å¬çš„èŠå¤©windowsList
    chat_windows = ["å®¢æœç¾¤1", "æŠ€æœ¯æ”¯æŒç¾¤", "é”€å”®å’¨è¯¢"]
    
    # å¼€å§‹æœåŠ¡
    ai_service.start_monitoring(chat_windows)
```

### 5.2 é…ç½®æ–‡ä»¶ç¤ºä¾‹

```json
{
  "system_config": {
    "max_concurrent_chats": 10,
    "response_timeout": 30,
    "quality_threshold": 3.5,
    "auto_transfer_keywords": ["æŠ•è¯‰", "é€€æ¬¾", "æ³•å¾‹", "ç´§æ€¥"],
    "working_hours": "09:00-18:00"
  },
  "llm_config": {
    "provider": "openai",
    "model": "gpt-4",
    "temperature": 0.3,
    "max_tokens": 1000
  },
  "knowledge_base": {
    "update_interval": "daily",
    "categories": [
      "product_info",
      "service_policy", 
      "technical_support",
      "account_help"
    ]
  }
}
```

## 6. æœ€ä½³å®è·µ

### 6.1 Prompt Engineering åŸåˆ™

1. **Clear Instructionsï¼ˆæ¸…æ™°æŒ‡ä»¤ï¼‰**
   - ä½¿ç”¨å…·ä½“ã€æ˜ç¡®çš„æŒ‡ä»¤
   - é¿å…æ¨¡ç³Šçš„è¡¨è¿°
   - æä¾›å…·ä½“çš„è¾“å‡ºæ ¼å¼

2. **Few-shot Learningï¼ˆå°‘æ ·æœ¬å­¦ä¹ ï¼‰**
   - åœ¨å…³é”®èŠ‚ç‚¹æä¾›ç¤ºä¾‹
   - å±•ç¤ºæœŸæœ›çš„è¾“å…¥è¾“å‡ºæ ¼å¼
   - åŒ…å«è¾¹ç•Œæƒ…å†µçš„ç¤ºä¾‹

3. **Chain-of-Thoughtï¼ˆæ€ç»´é“¾ï¼‰**
   - å¼•å¯¼AIè¿›è¡Œæ­¥éª¤æ€§æ€è€ƒ
   - åœ¨å¤æ‚ä»»åŠ¡ä¸­åˆ†è§£æ€è€ƒè¿‡ç¨‹
   - æé«˜æ¨ç†çš„å‡†ç¡®æ€§

4. **Role Playingï¼ˆè§’è‰²æ‰®æ¼”ï¼‰**
   - ä¸ºæ¯ä¸ªèŠ‚ç‚¹è®¾å®šæ˜ç¡®çš„è§’è‰²
   - ä¿æŒè§’è‰²çš„ä¸€è‡´æ€§
   - å¼ºè°ƒä¸“ä¸šæ€§å’Œè´£ä»»æ„Ÿ

### 6.2 å·¥ä½œæµä¼˜åŒ–å»ºè®®

1. **æ€§èƒ½ä¼˜åŒ–**
   - ä½¿ç”¨å¼‚æ­¥å¤„ç†æé«˜å¹¶å‘èƒ½åŠ›
   - å®ç°æ™ºèƒ½ç¼“å­˜å‡å°‘é‡å¤è®¡ç®—
   - å®šæœŸä¼˜åŒ–æç¤ºè¯å‡å°‘tokenæ¶ˆè€—

2. **è´¨é‡ä¿è¯**
   - å»ºç«‹A/Bæµ‹è¯•æœºåˆ¶éªŒè¯æç¤ºè¯æ•ˆæœ
   - å®šæœŸæ”¶é›†ç”¨æˆ·åé¦ˆä¼˜åŒ–å›å¤è´¨é‡
   - å®ç°äººå·¥å¹²é¢„å’Œçº æ­£æœºåˆ¶

3. **ç›‘æ§å‘Šè­¦**
   - ç›‘æ§æ¯ä¸ªèŠ‚ç‚¹çš„å¤„ç†æ—¶é—´
   - è®¾ç½®è´¨é‡åˆ†æ•°å¼‚å¸¸å‘Šè­¦
   - è·Ÿè¸ªç”¨æˆ·æ»¡æ„åº¦æŒ‡æ ‡

4. **æ‰©å±•æ€§è®¾è®¡**
   - æ”¯æŒåŠ¨æ€æ·»åŠ æ–°çš„é—®é¢˜ç±»åˆ«
   - æ”¯æŒå¤šè¯­è¨€å®¢æœåœºæ™¯
   - æ”¯æŒä¸åŒä¸šåŠ¡åœºæ™¯çš„å®šåˆ¶åŒ–

### 6.3 å®‰å…¨è€ƒè™‘

1. **æ•°æ®å®‰å…¨**
   - å¯¹æ•æ„Ÿä¿¡æ¯è¿›è¡Œè„±æ•å¤„ç†
   - å®ç°æ•°æ®åŠ å¯†å­˜å‚¨
   - å®šæœŸæ¸…ç†è¿‡æœŸæ—¥å¿—

2. **è®¿é—®æ§åˆ¶**
   - å®ç°ç»†ç²’åº¦çš„æƒé™ç®¡ç†
   - è®°å½•æ‰€æœ‰æ“ä½œæ—¥å¿—
   - å®šæœŸè¿›è¡Œå®‰å…¨å®¡è®¡

3. **å¼‚å¸¸å¤„ç†**
   - å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶
   - ä¼˜é›…çš„é™çº§ç­–ç•¥
   - åŠæ—¶çš„å¼‚å¸¸é€šçŸ¥

<div align="center">
<h3>ğŸ¯ å·¥ä½œæµæ€»ç»“</h3>
æœ¬AIå®¢æœå·¥ä½œæµé€šè¿‡ä¸ƒä¸ªæ ¸å¿ƒèŠ‚ç‚¹çš„ä¸²è”ï¼Œå®ç°äº†ä»æ¶ˆæ¯æ¥æ”¶åˆ°å›å¤å‘é€çš„å…¨è‡ªåŠ¨åŒ–æµç¨‹ï¼Œç»“åˆäº†å…ˆè¿›çš„Prompt EngineeringæŠ€æœ¯å’Œwxautoxçš„å¼ºå¤§åŠŸèƒ½ï¼Œä¸ºä¼ä¸šæä¾›äº†ä¸€ä¸ªé«˜æ•ˆã€æ™ºèƒ½ã€å¯é çš„å¾®ä¿¡å®¢æœè§£å†³æ–¹æ¡ˆã€‚
</div>

---

*æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.0*  
*æœ€åæ›´æ–°ï¼š2024å¹´*  
*åŸºäºï¼šwxautox + Prompt Engineering Guide*